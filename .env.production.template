# Production Environment Configuration Template
# Copy this file to .env.production and fill in the actual values
#
# SECURITY WARNING: Never commit actual production values to version control!
# Use secure environment variable injection in your deployment pipeline

#
# Application Configuration
#
NODE_ENV=production
PORT=3000

#
# External API Credentials - REQUIRED FOR PRODUCTION
#
# GUS (Central Statistical Office) API Configuration
# Obtain your API key from: https://api.stat.gov.pl/Home/RegonApi
GUS_USER_KEY=your_production_gus_api_key_here_20_chars_min
GUS_BASE_URL=https://wyszukiwarkaregon.stat.gov.pl/wsBIR/UslugaBIRzewnPubl.svc

# CEIDG (Central Register of Individual Entrepreneurs) API Configuration
# Obtain JWT token from: https://datastore.ceidg.gov.pl/
CEIDG_JWT_TOKEN=your_production_ceidg_jwt_token_here_minimum_50_characters
CEIDG_BASE_URL=https://datastore.ceidg.gov.pl/api/ceidg/v3

# KRS (National Court Register) API Configuration
KRS_BASE_URL=https://api-krs.ms.gov.pl/api/krs

#
# API Authentication - REQUIRED FOR PRODUCTION
#
# Comma-separated list of valid API keys (minimum 32 characters each)
# Generate cryptographically secure API keys using one of these methods:
#
#   OpenSSL (recommended):
#     openssl rand -base64 48
#
#   Node.js crypto:
#     node -e "console.log(require('crypto').randomBytes(48).toString('base64url'))"
#
# SECURITY: Never use Math.random() or online generators for production keys
APP_API_KEYS=prod_api_key_1234567890abcdef1234567890abcdef,backup_api_key_abcdef1234567890abcdef1234567890

#
# Application-level Performance and Timeout Configuration
#
APP_REQUEST_TIMEOUT=15000
APP_EXTERNAL_API_TIMEOUT=5000
APP_RATE_LIMIT_PER_MINUTE=100

#
# Retry Configuration for External APIs
#
# GUS Service Retry Configuration
GUS_MAX_RETRIES=3
GUS_INITIAL_DELAY=200

# KRS Service Retry Configuration
KRS_MAX_RETRIES=3
KRS_INITIAL_DELAY=300

# CEIDG Service Retry Configuration
CEIDG_MAX_RETRIES=3
CEIDG_INITIAL_DELAY=250

#
# GUS Rate Limiting Configuration
#
# Maximum requests per second for GUS API (token bucket algorithm)
# Prevents overwhelming external API with concurrent requests
# Production recommendation: 10 requests/second (adjust based on your GUS API quota)
GUS_MAX_REQUESTS_PER_SECOND=10

#
# Application-level Logging Configuration
#
# Log level: error, warn, info, debug (default: info)
APP_LOG_LEVEL=info

# Log format: json, pretty (default: json for production)
APP_LOG_FORMAT=json

# Enable structured logging with correlation IDs
ENABLE_CORRELATION_LOGGING=true

#
# Application-level Security Configuration - CORS
#
# IMPORTANT: Specify exact allowed origins for CORS (comma-separated list)
# NEVER use "*" in production - this creates CSRF vulnerability
# Localhost is always allowed automatically for local testing
#
# Example: Your production frontend domain(s)
APP_CORS_ALLOWED_ORIGINS=https://yourapp.com,https://www.yourapp.com,https://admin.yourapp.com

# Common production CORS patterns:
# - Single domain: APP_CORS_ALLOWED_ORIGINS=https://app.example.com
# - Multiple domains: APP_CORS_ALLOWED_ORIGINS=https://app.com,https://api.app.com,https://admin.app.com
# - Development testing: APP_CORS_ALLOWED_ORIGINS=http://localhost:5173,https://staging.app.com

#
# Security Configuration - HTTP Headers
#
# Enable Helmet security headers (REQUIRED for production)
# Helmet provides comprehensive HTTP security headers following OWASP best practices:
#
# Content-Security-Policy (CSP):
#   - default-src 'self': Only load resources from same origin
#   - frame-ancestors 'none': Prevent clickjacking attacks
#   - upgrade-insecure-requests: Force HTTPS for all resources
#
# Strict-Transport-Security (HSTS):
#   - max-age 31536000: Force HTTPS for 1 year
#   - includeSubDomains: Apply to all subdomains
#   - preload: Submit to browser HSTS preload list
#
# Other Security Headers:
#   - X-Frame-Options: DENY (prevent iframe embedding)
#   - X-Content-Type-Options: nosniff (prevent MIME sniffing)
#   - Referrer-Policy: no-referrer (prevent info leakage)
#   - Cross-Origin-*-Policy: same-origin (Spectre/Meltdown protection)
#
# IMPORTANT: Set to 'true' for production (default: true)
# Only disable if you have alternative security header implementation
APP_ENABLE_HELMET=true

#
# Application-level Health Check Configuration
#
# Enable detailed health checks (default: true)
APP_HEALTH_CHECK_ENABLED=true

# Health check timeout in milliseconds (default: 5000)
APP_HEALTH_CHECK_TIMEOUT=5000

#
# Application-level Orchestration Timeouts
#
# State machine orchestration timeout in milliseconds (default: 30000)
APP_ORCHESTRATION_TIMEOUT=30000

#
# Application-level Swagger Configuration
#
# Enable Swagger documentation (recommended: false for production)
APP_SWAGGER_ENABLED=false

# Development server URL for Swagger
APP_SWAGGER_SERVER_URL_DEVELOPMENT=http://localhost:3000

# Production server URL for Swagger (if Swagger enabled)
APP_SWAGGER_SERVER_URL_PRODUCTION=https://api.yourdomain.com

#
# Monitoring and Observability
#
# Enable Prometheus metrics endpoint (default: false)
ENABLE_METRICS=true

# Metrics endpoint path (default: /metrics)
METRICS_PATH=/metrics

# Enable request tracing (default: true)
ENABLE_TRACING=true

#
# Circuit Breaker Configuration
#
# Enable circuit breaker for external APIs (default: true)
ENABLE_CIRCUIT_BREAKER=true

# Circuit breaker failure threshold (default: 5)
CIRCUIT_BREAKER_FAILURE_THRESHOLD=5

# Circuit breaker timeout in milliseconds (default: 60000)
CIRCUIT_BREAKER_TIMEOUT=60000

#
# Caching Configuration (if implemented)
#
# Enable response caching (default: false)
ENABLE_CACHING=false

# Cache TTL in seconds (default: 300)
CACHE_TTL=300

# Redis connection string for caching (if enabled)
# REDIS_URL=redis://redis:6379

#
# Database Configuration (if implemented)
#
# Database connection string (if database is added)
# DATABASE_URL=postgresql://username:password@localhost:5432/unified_company_data

#
# SSL/TLS Configuration
#
# SSL certificate path (for HTTPS)
# SSL_CERT_PATH=/etc/ssl/certs/server.crt

# SSL private key path (for HTTPS)
# SSL_KEY_PATH=/etc/ssl/private/server.key

#
# Production Deployment Configuration
#
# Application name for logging and monitoring
APP_NAME=unified-company-data-server

# Application version (should match package.json)
APP_VERSION=1.0.0

# Deployment environment identifier
DEPLOYMENT_ENV=production

# Build number or commit hash for deployment tracking
BUILD_NUMBER=

# Enable graceful shutdown (default: true)
ENABLE_GRACEFUL_SHUTDOWN=true

# Graceful shutdown timeout in milliseconds (default: 30000)
GRACEFUL_SHUTDOWN_TIMEOUT=30000

#
# External Service URLs (customize for your infrastructure)
#
# If you're using custom proxy or gateway URLs
# GUS_PROXY_URL=
# KRS_PROXY_URL=
# CEIDG_PROXY_URL=

#
# Development/Testing Overrides (remove in production)
#
# Uncomment these only for testing production configuration in development
# MOCK_EXTERNAL_APIS=false
# ENABLE_API_DOCS=false
# ENABLE_DEBUG_LOGS=false